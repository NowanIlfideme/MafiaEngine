&id001 !GameEngine
entities:
- &id006 !TestMod
  _subscriptions: [vote, mkill, phase_change, death, alignment_eliminated]
  engine: *id001
  members: []
  name: Moderator
  phase_iter: !PhaseIterator
    current: 2
    engine: *id001
    name: ''
    phases: [day, night]
    repeat: true
  status: {}
  vote_tally: &id010 !VoteTally
    engine: *id001
    name: ''
    voted: {}
    votes: {}
- &id002 !Alignment
  _subscriptions: []
  engine: *id001
  members:
  - &id007 !Player
    _subscriptions: [death]
    engine: *id001
    members: []
    name: Townie0
    roles:
    - !Role
      abilities:
      - !Vote
        engine: *id001
        name: vote
        phase: [day]
        total_uses: null
        uses: null
      alignment: *id002
      engine: *id001
      name: townie_role
      status: {alive: true}
    status: {dead: true}
  - &id008 !Player
    _subscriptions: [death]
    engine: *id001
    members: []
    name: Townie1
    roles:
    - !Role
      abilities:
      - !Vote
        engine: *id001
        name: vote
        phase: [day]
        total_uses: null
        uses: null
      alignment: *id002
      engine: *id001
      name: townie_role
      status: {alive: true}
    status: {dead: true}
  - &id009 !Player
    _subscriptions: [death]
    engine: *id001
    members: []
    name: Townie2
    roles:
    - !Role
      abilities:
      - !Vote
        engine: *id001
        name: vote
        phase: [day]
        total_uses: null
        uses: null
      alignment: *id002
      engine: *id001
      name: townie_role
      status: {alive: true}
    status: {dead: true}
  name: Town
  status: {}
- &id003 !MafiaAlignment
  _subscriptions: [phase_change]
  engine: *id001
  members:
  - &id004 !Player
    _subscriptions: [death]
    engine: *id001
    members: []
    name: Mafioso0
    roles:
    - !Role
      abilities:
      - !Vote
        engine: *id001
        name: vote
        phase: [day]
        total_uses: null
        uses: null
      - !MKill
        engine: *id001
        name: mkill
        phase: [night]
        total_uses: null
        uses: null
      alignment: *id003
      engine: *id001
      name: mafioso_role
      status: {alive: true}
    status: {}
  - &id005 !Player
    _subscriptions: [death]
    engine: *id001
    members: []
    name: Mafioso1
    roles:
    - !Role
      abilities:
      - !Vote
        engine: *id001
        name: vote
        phase: [day]
        total_uses: null
        uses: null
      - !MKill
        engine: *id001
        name: mkill
        phase: [night]
        total_uses: null
        uses: null
      alignment: *id003
      engine: *id001
      name: mafioso_role
      status: {alive: true}
    status: {}
  name: Mafia
  status: {mkill_used: true}
- *id004
- *id005
event: !EventManager
  history: !HistoryManager {}
  listeners:
    alignment_eliminated:
    - *id006
    death:
    - *id006
    - *id007
    - *id008
    - *id009
    - *id004
    - *id005
    - !!python/object:mafia_engine.trigger.AlignmentEliminationChecker
      alignment: *id003
      eliminated: false
      engine: *id001
      name: mafia_checker
      output_event: alignment_eliminated
      update_on: [death]
    - !!python/object:mafia_engine.trigger.AlignmentEliminationChecker
      alignment: *id002
      eliminated: true
      engine: *id001
      name: town_checker
      output_event: alignment_eliminated
      update_on: [death]
    mkill:
    - *id006
    phase_change:
    - *id006
    - *id010
    - *id003
    vote:
    - *id006
status: {finished: true, phase: night}
